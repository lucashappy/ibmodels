/*
* @file
* @brief    boxplus lightweight window engine on mouse-over
* @author   Levente Hunyadi
* @version  1.3.0
* @remarks  Copyright (C) 2009-2010 Levente Hunyadi
* @remarks  Licensed under GNU/GPLv3, see http://www.gnu.org/licenses/gpl-3.0.html
* @see      http://hunyadi.info.hu/projects/sigplus
*/
if(typeof(__jQuery__)=="undefined"){var __jQuery__=jQuery.noConflict()}(function(d){var i;var b;var k;var e;var o;var f=d(window);var g=new Image();var c;d(function(){d("body").append('<div id="boxplus-dialog" class="hide"><div id="boxplus-viewer" class="hide"></div><div id="boxplus-caption" class="hide"><p class="title"></p><p class="caption"></p></div></div>');i=d("#boxplus-dialog");b=i.css("width");k=i.css("height");e=d("#boxplus-viewer");o=d("#boxplus-caption")});d.fn.dimensions=function(){return{width:parseInt(this.css("width")),height:parseInt(this.css("height"))}};d.fn.boxplusHover=function(){d(this).each(function(){d(this).hover(j,l)})};d.fn.boxplusHoverGallery=function(){d("li",this).each(function(){var q=d("a:has(img)",this).eq(0);if(q){q.boxplusHover()}})};function h(s,H){s+=i.outerWidth(true)-parseInt(i.css("width"));H+=i.outerHeight(true)-parseInt(i.css("height"));var r=d("img:first",c);var I=r.offset();var w=I.left-f.scrollLeft();var t=I.top-f.scrollTop();var q=r.outerWidth();var B=r.outerHeight();var D=[w+q+s-f.width(),t+B+H-f.height(),s-w];var C=-1;var A=Infinity;for(var z in D){if(D[z]<A){C=z;A=D[z]}}var G=(f.width()-s)/2;var F=(f.height()-H)/2;var v=20;var u=[w+q+v,G,w-s-v];var E=[F,t+B+v,F];return{left:f.scrollLeft()+u[C],top:f.scrollTop()+E[C]}}function a(q,r){return d.extend({width:q,height:r},h(q,r))}function j(q){c=d(q.currentTarget);i.css(h(b,k));i.css({width:b,height:k});g.onload=m;g.src=c.attr("href");i.removeClass("hide")}function l(){i.stop();i.addClass("hide");e.addClass("hide");o.addClass("hide")}function m(){var q=g.width;var r=g.height;e.css({width:q,height:r});e.css("background-image",'url("'+c.attr("href")+'")');i.css(a(1,1));i.animate(a(q,r),"fast","swing",n)}function n(){e.removeClass("hide");var q=d("img:first",c);var s=q.attr("alt");var r=c.attr("title");if(s&&s!=r){d(".title",o).html(s)}else{d(".title",o).empty()}d(".caption",o).html(r);if(s||r){var t=i.dimensions();t.height+=o.outerHeight(true);i.animate(t,"slow","swing",p)}}function p(){o.removeClass("hide")}})(__jQuery__);